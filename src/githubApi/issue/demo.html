<div class="markdown prose w-full break-words dark:prose-invert dark"><p>以下是一个简单的 Babel 插件示例，用于去除代码中的 <code>console.log</code> 语句：</p><pre><div class="bg-black rounded-md mb-4"><div class="flex items-center relative text-gray-200 bg-gray-800 px-4 py-2 text-xs font-sans justify-between rounded-t-md"><span>javascript</span><button class="flex ml-auto gap-2"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>Copy code</button></div><div class="p-4 overflow-y-auto"><code class="!whitespace-pre hljs language-javascript"><span class="hljs-comment">// babel-plugin-remove-console.js</span>

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">{ types: t }</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">visitor</span>: {
      <span class="hljs-comment">// 处理函数调用表达式</span>
      <span class="hljs-title class_">CallExpression</span>(path) {
        <span class="hljs-keyword">const</span> { callee } = path.<span class="hljs-property">node</span>;

        <span class="hljs-comment">// 如果函数调用的名称是 console.log</span>
        <span class="hljs-keyword">if</span> (
          t.<span class="hljs-title function_">isMemberExpression</span>(callee) &amp;&amp;
          t.<span class="hljs-title function_">isIdentifier</span>(callee.<span class="hljs-property">object</span>, { <span class="hljs-attr">name</span>: <span class="hljs-string">'console'</span> }) &amp;&amp;
          t.<span class="hljs-title function_">isIdentifier</span>(callee.<span class="hljs-property">property</span>, { <span class="hljs-attr">name</span>: <span class="hljs-string">'log'</span> })
        ) {
          <span class="hljs-comment">// 移除该函数调用</span>
          path.<span class="hljs-title function_">remove</span>();
        }
      }
    }
  };
};
</code></div></div></pre><p>该插件会遍历代码中的函数调用表达式，如果发现是 <code>console.log</code>，则会移除该函数调用。</p><p>要使用该插件，可以在项目中安装并配置它。例如，创建一个 <code>.babelrc</code> 文件，并将该插件添加到 Babel 的插件列表中：</p><pre><div class="bg-black rounded-md mb-4"><div class="flex items-center relative text-gray-200 bg-gray-800 px-4 py-2 text-xs font-sans justify-between rounded-t-md"><span>json</span><button class="flex ml-auto gap-2"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>Copy code</button></div><div class="p-4 overflow-y-auto"><code class="!whitespace-pre hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"./path/to/babel-plugin-remove-console.js"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></div></div></pre><p>然后运行 Babel 命令或构建工具，它将应用该插件，并从代码中去除所有的 <code>console.log</code> 语句。</p><p>请注意，这只是一个简单的示例插件，仅适用于演示目的。在实际开发中，你可能需要更复杂的逻辑来处理不同的情况和要求。</p></div>
